# .lefthook.yaml
---
pre-commit:
  parallel: true
  jobs:
    - name: go
      group:
        jobs:
          - run: go fmt ./...
          - run: goimports -w .
          - run: staticcheck ./...
          - run: go vet ./...
    - name: md-lint
      glob: "*.md"
      run: |
        docker run -v $(pwd):/workdir \
        ghcr.io/igorshubovych/markdownlint-cli:v0.43.0 \
        {staged_files} --disable MD013
    - name: yaml-lint
      glob: "*.{yml,yaml}"
      exclude:
        - .golangci.yml
      run: |
        docker run -v $(pwd):/code \
          pipelinecomponents/yamllint:0.31.0 \
          /app/bin/yamllint {staged_files}
    - name: json-lint
      glob: "*.json"
      run: |
        docker run --rm -v $(pwd):/code \
        pipelinecomponents/jsonlint:0.19.1 \
        jsonlint {staged_files} -s -i
